{"meta":{"title":"Kenryu","subtitle":"hello there.","description":"im testing my firt blog site.","author":"Kenryu","url":"https://kenryu.cc","root":"/"},"pages":[],"posts":[{"title":"Postfix Dovecot MySQL Mail Server","slug":"Linux/Mail-Server/Postfix-Dovecot-MySQL-Mail-Server","date":"2022-05-01T15:00:00.000Z","updated":"2022-05-27T12:48:43.935Z","comments":true,"path":"2022/05/02/Linux/Mail-Server/Postfix-Dovecot-MySQL-Mail-Server/","link":"","permalink":"https://kenryu.cc/2022/05/02/Linux/Mail-Server/Postfix-Dovecot-MySQL-Mail-Server/","excerpt":"","text":"Objective Local network (web)mail server. Local private PKI. On LNMP-base use Postfix &amp; Dovecot &amp; PostfixAdmin &amp; RoundCube. Name Version Command Linux Rocky Linux release 8.5 (Green Obsidian) cat /etc/centos-release /etc/os-release /etc/redhat-release /etc/rocky-release /etc/system-release Nginx nginx version: nginx/1.20.2 nginx -v MySQL mysql Ver 8.0.28 for Linux on x86_64 (MySQL Community Server - GPL) mysql –version PHP PHP 7.4.29 (fpm-fcgi) (built: Apr 12 2022 10:55:38) php -v Postfix mail_version = 3.5.8 postconf mail_version Dovecot 2.3.8 (9df20d2db) dovecot –version PostfixAdmin 3.3.11 Roundcube 1.5.2 Prerequisites Have a host with CPU more than 1Core and Memory higher than 2GB. Have an LNMP-Base or LAMP-Base host; Have an FQDN that can be resolved; Have private CA root certificate, Host’s private key, Host’s certificate; free command 1234# free -htotal used free shared buff/cache availableMem: 1.9Gi 624Mi 746Mi 20Mi 606Mi 1.2GiSwap: 2.0Gi 0B 2.0Gi DNS Record on name server: 12mail.example.com. IN A 192.168.65.132132.65 IN PTR mail.example.com. SSL/TSL’s private key and certificate file is following path : 12345[root@email ~]# ll /etc/pki/tls/certs/mail.example.com.crt-r--r--r-- 1 root root 5439 Apr 23 16:41 /etc/pki/tls/certs/mail.example.com.crt[root@email ~]#[root@email ~]# ll /etc/pki/tls/private/mail.example.com.key-r-------- 1 root root 1704 Apr 23 16:41 /etc/pki/tls/private/mail.example.com.key Step1. OS SettingSetting hostname. 12# dnf -y update# hostnamectl set-hostname mail.example.com 123# vim /etc/hosts127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 mail.example.com::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 mail.example.com Disable SELinux 12# sed -i s/^SELINUX=.*$/SELINUX=disabled/ /etc/selinux/config# reboot Allow the following packages to pass though the firewall. 123# firewall-cmd --permanent --add-service=&#123;http,https,smtp,smtp-submission,smtps,imap,imaps,pop3,pop3s&#125;# firewall-cmd --reload# firewall-cmd --list-all Install some required packages and recommended PHP modules. 12# dnf -y install vim wget tar git nmap bind-utils telnet mailx openssl# dnf -y install php php-fpm php-imap php-mbstring php-mysqlnd php-gd php-opcache php-json php-curl php-zip php-xml php-bz2 php-intl php-gmp Step2. Create DatabasesCreate a database for PostfixAdmin. 1234mysql&gt; CREATE DATABASE postfixadmin;mysql&gt; CREATE USER &#x27;postfixadmin&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;YourPassword&#x27;;mysql&gt; GRANT ALL PRIVILEGES ON `postfixadmin` . _config.landscape.yml _config.yml db.json Get_Joplin_resources.sh i18n Install_JavaScripts_via_npm.sh node_modules package.json package-lock.json public scaffolds source symlink.sh test.md themes tmp.md TO &#x27;postfixadmin&#x27;@&#x27;localhost&#x27;;mysql&gt; FLUSH PRIVILEGES; Create a database for roundcubu. 1234mysql&gt; CREATE DATABASE roundcube DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;mysql&gt; CREATE USER roundcube@localhost IDENTIFIED BY &#x27;YourPassword&#x27;;mysql&gt; GRANT ALL PRIVILEGES ON roundcube.* TO roundcube@localhost;mysql&gt; FLUSH PRIVILEGES; Step3. Create Web ServersCreate Nginx config file for PostfixAdmin and RoundCube. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475# cat /etc/nginx/conf.d/mail.example.com.conf# Redirect http to https.server &#123;listen 80;listen [::]:80;server_name mail.example.com, 192.168.65.132;return 301 https://mail.example.com$request_uri;&#125;# Listen https://mail.example.comserver &#123;listen 443 ssl http2;server_name mail.example.com;# SSl/TLS configurationssl_certificate &quot;/etc/pki/tls/certs/mail.example.com.crt&quot;;ssl_certificate_key &quot;/etc/pki/tls/private/mail.example.com.key&quot;;ssl_session_cache shared:SSL:1m;ssl_session_timeout 10m;ssl_ciphers PROFILE=SYSTEM;ssl_prefer_server_ciphers on;# Roundcube configurationroot /usr/share/nginx/roundcube/;index index.php index.html index.htm;# Roundcube logserror_log /var/log/nginx/roundcube.error;access_log /var/log/nginx/roundcube.access;# Roundcube Locationslocation / &#123;try_files $uri $uri/ /index.php;&#125;location ~ .php$ &#123;try_files $uri =404;fastcgi_pass unix:/run/php-fpm/www.sock;fastcgi_index index.php;fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;include fastcgi_params;&#125;location ~ /.well-known/acme-challenge &#123;allow all;&#125;location ~ ^/(README|INSTALL|LICENSE|CHANGELOG|UPGRADING)$ &#123;deny all;&#125;location ~ ^/(bin|SQL)/ &#123;deny all;&#125;# Sub-Location of PostfixAdminlocation /postfixadmin &#123;alias /usr/share/nginx/postfixadmin/public;access_log /var/log/nginx/postfixadmin_access.log;error_log /var/log/nginx/postfixadmin_error.log;try_files $uri $uri/ /index.php;location ~ ^/(.+.php)$ &#123;try_files $uri =404;fastcgi_pass unix:/run/php-fpm/www.sock;fastcgi_index index.php;fastcgi_param SCRIPT_FILENAME $request_filename;include /etc/nginx/fastcgi_params;&#125;&#125;# A long browser cache lifetime can speed up repeat visits to your page# location ~* .(jpg|jpeg|gif|png|webp|svg|woff|woff2|ttf|css|js|ico|xml)$ &#123;# access_log off;# log_not_found off;# expires 360d;# &#125;&#125; Step4. Configure PostfixInstall and start Postfix. 12# dnf -y install postfix postfix-mysql# systemctl enable --now postfix Edit Postfix main config file with following command. This will defined our domain hostname tls_level etc… 12# cp /etc/postfix/main.cf /etc/postfix/main.cf.bak# vim /etc/postfix/main.cf main.cf We can configure postfix by direct modifying above file or use following postconf command. 12345678910Change to:# postconf -e &quot;inet_interfaces = all&quot;# postconf -e &#x27;inet_protocols = ipv4&#x27;# postconf &#x27;smtpd_tls_cert_file = /etc/pki/tls/certs/mail.example.com.crt&#x27;# postconf &#x27;smtpd_tls_key_file = /etc/pki/tls/private/mail.example.com.key&#x27;Add:# postconf -e &#x27;smtp_address_preference = ipv4&#x27;# postconf &quot;smtpd_tls_loglevel = 1&quot;# postconf &quot;smtp_tls_loglevel = 1&quot; 123456789101112131415161718192021222324#Add following to the end of the file.# Force TLSv1.3 or TLSv1.2smtpd_tls_mandatory_protocols = !SSLv2, !SSLv3, !TLSv1, !TLSv1.1smtpd_tls_protocols = !SSLv2, !SSLv3, !TLSv1, !TLSv1.1smtp_tls_mandatory_protocols = !SSLv2, !SSLv3, !TLSv1, !TLSv1.1smtp_tls_protocols = !SSLv2, !SSLv3, !TLSv1, !TLSv1.1mailbox_transport = lmtp:unix:private/dovecot-lmtpsmtputf8_enable = novirtual_mailbox_domains = proxy:mysql:/etc/postfix/sql/mysql_virtual_domains_maps.cfvirtual_mailbox_maps =proxy:mysql:/etc/postfix/sql/mysql_virtual_mailbox_maps.cf,proxy:mysql:/etc/postfix/sql/mysql_virtual_alias_domain_mailbox_maps.cfvirtual_alias_maps =proxy:mysql:/etc/postfix/sql/mysql_virtual_alias_maps.cf,proxy:mysql:/etc/postfix/sql/mysql_virtual_alias_domain_maps.cf,proxy:mysql:/etc/postfix/sql/mysql_virtual_alias_domain_catchall_maps.cfvirtual_transport = lmtp:unix:private/dovecot-lmtpvirtual_mailbox_base = /var/vmailvirtual_minimum_uid = 2000virtual_uid_maps = static:2000virtual_gid_maps = static:2000 Enable Submssion port (587) and SMTP-S (465) by editting /etc/postfix/master.cf file. 12# cp /etc/postfix/master.cf /etc/postfix/master.cf.bak# vim /etc/postfix/master.cf master.cf 1234567891011121314151617181920# For Submissionsubmission inet n - y - - smtpd-o syslog_name=postfix/submission-o smtpd_tls_security_level=encrypt-o smtpd_tls_wrappermode=no-o smtpd_sasl_auth_enable=yes-o smtpd_relay_restrictions=permit_sasl_authenticated,reject-o smtpd_recipient_restrictions=permit_mynetworks,permit_sasl_authenticated,reject-o smtpd_sasl_type=dovecot-o smtpd_sasl_path=private/auth# For SMTP-Ssmtps inet n - y - - smtpd-o syslog_name=postfix/smtps-o smtpd_tls_wrappermode=yes-o smtpd_sasl_auth_enable=yes-o smtpd_relay_restrictions=permit_sasl_authenticated,reject-o smtpd_recipient_restrictions=permit_mynetworks,permit_sasl_authenticated,reject-o smtpd_sasl_type=dovecot-o smtpd_sasl_path=private/auth (Option) We can follow the steps below to create a watchdog to prevent the service from terminating unexpectedly. 12345# mkdir -p /etc/systemd/system/postfix.service.d/# vim /etc/systemd/system/postfix.service.d/restart.conf[Service]Restart=on-failureRestartSec=5s (Option) Verify the watchdog is working. 123# systemctl daemon-reload# pkill master# systemctl status postfix Step5. Configure Dovecot12# dnf -y install dovecot dovecot-mysql# systemctl enable --now dovecot Add the dovecot to the mail group. 1# gpasswd -a dovecot mail Add the web server(nginx) to the dovecot group. 1# gpasswd -a nginx dovecot Generating DH parameters, This is going to take a long time. 1# openssl dhparam -out /etc/dovecot/dh.pem 4096 Uncomment following line and remove submission because we have enabled submission using Postfix. 1234# cp /etc/dovecot/dovecot.conf /etc/dovecot/dovecot.conf.bak# vim /etc/dovecot/dovecot.conf#protocols = imap pop3 lmtp submissionprotocols = imap pop3 lmtp Create new file and fill in the following. This will enable Dovecot to connect to our MySQL database. 1# vim /etc/dovecot/dovecot-sql.conf.ext 123456driver = mysqlconnect = host=localhost dbname=postfixadmin user=postfixadmin password=YourPassworddefault_pass_scheme = SHA512password_query = SELECT username AS user,password FROM mailbox WHERE username = &#x27;%u&#x27; AND active=&#x27;1&#x27;user_query = SELECT maildir, 2000 AS uid, 2000 AS gid FROM mailbox WHERE username = &#x27;%u&#x27; AND active=&#x27;1&#x27;iterate_query = SELECT username AS user FROM mailbox Modify the file as below. This will define the mail location as well as the namespace. 12345# vim /etc/dovecot/conf.d/10-mail.conf# Add following in the end.mail_location = maildir:~/Maildirmail_home = /var/vmail/%d/%nmail_privileged_group = mail Add the following lines to the end of this file. 12# cp /etc/dovecot/conf.d/10-master.conf /etc/dovecot/conf.d/10-master.conf.bak# vim /etc/dovecot/conf.d/10-master.conf 12345678910111213#Add following in the end of the file.service stats &#123;unix_listener stats-reader &#123;user = nginxgroup = nginxmode = 0660&#125;unix_listener stats-writer &#123;user = nginxgroup = nginxmode = 0660&#125;&#125; Configuring Authentication Mechanism. 12345678# cp /etc/dovecot/conf.d/10-auth.conf /etc/dovecot/conf.d/10-auth.conf.bak# vim /etc/dovecot/conf.d/10-auth.conf#Change to:auth_username_format = %uauth_mechanisms = plain login!include auth-sql.conf.extauth_debug = yesauth_debug_passwords = yes Configuring SSL/TLS Encryption. 12345678910# cp /etc/dovecot/conf.d/10-ssl.conf /etc/dovecot/conf.d/10-ssl.conf.bak# vim /etc/dovecot/conf.d/10-ssl.conf#Change to:ssl = requiredssl_cert = &lt;/etc/pki/tls/certs/mail.example.com.crtssl_key = &lt;/etc/pki/tls/private/mail.example.com.keyssl_dh = &lt;/etc/dovecot/dh.pemssl_min_protocol = TLSv1.2ssl_cipher_list = PROFILE=SYSTEMssl_prefer_server_ciphers = yes SASL Authentication Between Postfix and Dovecot. 12345678910111213141516# vim /etc/dovecot/conf.d/10-master.conf# Change to:service lmtp &#123;unix_listener /var/spool/postfix/private/dovecot-lmtp &#123;mode = 0600user = postfixgroup = postfix&#125;&#125;service auth &#123;unix_listener /var/spool/postfix/private/auth &#123;mode = 0600user = postfixgroup = postfix&#125;&#125; Edit the following file like below. This will auto-create Sent ,Junk, Draftsand Trash Folder. 123456789101112131415161718192021222324# cp /etc/dovecot/conf.d/15-mailboxes.conf /etc/dovecot/conf.d/15-mailboxes.conf.bak# vim /etc/dovecot/conf.d/15-mailboxes.confnamespace inbox &#123;# These mailboxes are widely used and could perhaps be created automatically:mailbox Drafts &#123;auto = createspecial_use = Drafts&#125;mailbox Junk &#123;auto = createspecial_use = Junk&#125;mailbox Trash &#123;auto = createspecial_use = Trash&#125;mailbox Sent &#123;auto = createspecial_use = Sent&#125;mailbox &quot;Sent Messages&quot; &#123;special_use = Sent&#125;&#125; Now we need to restart the Postfix and dovecot services. 123# systemctl restart postfix dovecot# systemctl status postfix# systemctl status dovecot Step6. Configure PostfixadminCheck https://github.com/postfixadmin/postfixadmin/releases to get the latest stable release first. And then we need to download the tarball via wget command. 1234# wget https://github.com/postfixadmin/postfixadmin/archive/postfixadmin-3.3.11.tar.gz# tar -zxvf postfixadmin-3.3.11.tar.gz# mv postfixadmin-postfixadmin-3.3.11/ /usr/share/nginx/postfixadmin# mkdir -p /usr/share/nginx/postfixadmin/templates_c Create the following new file and fill it like below. This will enable PostfixAdmin connect MySQL database and update password by PHP. 123456789101112# vim /usr/share/nginx/postfixadmin/config.local.php&lt;?php$CONF[&#x27;configured&#x27;] = true;$CONF[&#x27;database_type&#x27;] = &#x27;mysqli&#x27;;$CONF[&#x27;database_host&#x27;] = &#x27;localhost&#x27;;$CONF[&#x27;database_port&#x27;] = &#x27;3306&#x27;;$CONF[&#x27;database_user&#x27;] = &#x27;postfixadmin&#x27;;$CONF[&#x27;database_password&#x27;] = &#x27;YourPassword&#x27;;$CONF[&#x27;database_name&#x27;] = &#x27;postfixadmin&#x27;;$CONF[&#x27;encrypt&#x27;] = &#x27;dovecot:SHA512&#x27;;$CONF[&#x27;dovecotpw&#x27;] = &quot;/usr/bin/doveadm pw -r 12&quot;;?&gt; 1# chown -R nginx:nginx /usr/share/nginx/postfixadmin/ Make following directory. 1# mkdir -p /etc/postfix/sql/ Create following files and make sure they are set with permissions to be accessible by Postfix user. 12345678910# vim /etc/postfix/sql/mysql_virtual_domains_maps.cfuser = postfixadminpassword = YourPasswordhosts = localhostdbname = postfixadminquery = SELECT domain FROM domain WHERE domain=&#x27;%s&#x27; AND active = &#x27;1&#x27;#query = SELECT domain FROM domain WHERE domain=&#x27;%s&#x27;#optional query to use when relaying for backup MX#query = SELECT domain FROM domain WHERE domain=&#x27;%s&#x27; AND backupmx = &#x27;0&#x27; AND active = &#x27;1&#x27;#expansion_limit = 100 1234567# vim /etc/postfix/sql/mysql_virtual_mailbox_maps.cfuser = postfixadminpassword = YourPasswordhosts = localhostdbname = postfixadminquery = SELECT maildir FROM mailbox WHERE username=&#x27;%s&#x27; AND active = &#x27;1&#x27;#expansion_limit = 100 123456# vim /etc/postfix/sql/mysql_virtual_alias_domain_mailbox_maps.cfuser = postfixadminpassword = YourPasswordhosts = localhostdbname = postfixadminquery = SELECT maildir FROM mailbox,alias_domain WHERE alias_domain.alias_domain = &#x27;%d&#x27; and mailbox.username = CONCAT(&#x27;%u&#x27;, &#x27;@&#x27;, alias_domain.target_domain) AND mailbox.active = 1 AND alias_domain.active=&#x27;1&#x27; 1234567# vim /etc/postfix/sql/mysql_virtual_alias_maps.cfuser = postfixadminpassword = YourPasswordhosts = localhostdbname = postfixadminquery = SELECT goto FROM alias WHERE address=&#x27;%s&#x27; AND active = &#x27;1&#x27;#expansion_limit = 100 123456# vim /etc/postfix/sql/mysql_virtual_alias_domain_maps.cfuser = postfixadminpassword = YourPasswordhosts = localhostdbname = postfixadminquery = SELECT goto FROM alias,alias_domain WHERE alias_domain.alias_domain = &#x27;%d&#x27; and alias.address = CONCAT(&#x27;%u&#x27;, &#x27;@&#x27;, alias_domain.target_domain) AND alias.active = 1 AND alias_domain.active=&#x27;1&#x27; 123456# vim /etc/postfix/sql/mysql_virtual_alias_domain_catchall_maps.cfuser = postfixadminpassword = YourPasswordhosts = localhostdbname = postfixadminquery = SELECT goto FROM alias,alias_domain WHERE alias_domain.alias_domain = &#x27;%d&#x27; and alias.address = CONCAT(&#x27;@&#x27;, alias_domain.target_domain) AND alias.active = 1 AND alias_domain.active=&#x27;1&#x27; 1# chmod 0640 /etc/postfix/sql/* 123456789# adduser vmail --system --uid 2000 --user-group --no-create-home# mkdir /var/vmail/# chown vmail:vmail /var/vmail/ -R# chown -R postfix:postfix /etc/postfix/sql/# chown -R nginx:nginx /var/lib/php/opcache/# chown -R nginx:nginx /var/lib/php/session/# chown -R nginx:nginx /var/lib/php/wsdlcache/# chown nginx:nginx /etc/pki/tls/certs/mail.example.com.crt# chown nginx:nginx /etc/pki/tls/private/mail.example.com.key 12# nginx -t# nginx -s reload Open our browser and enter following URL to complete PostfixAdmin setup.https://mail.example.com/postfixadmin/setup.phpYou can generate a password hash through php -r &#39;echo password_hash(&quot;YourPassword&quot;, PASSWORD_DEFAULT);&#39; command.Now you need to add following line to the /usr/share/nginx/postfixadmin/config.local.php file in the end. 1$CONF[&#x27;setup_password&#x27;] = &#x27;Your_Password&#x27;s_Hash&#x27;; Follow the setup wizard to create an Administrator user and login.Now you can create Domain and Mailboxes in PostfixAdmin. Reference:https://github.com/postfixadmin/postfixadmin/tree/master/DOCUMENTShttps://raw.githubusercontent.com/postfixadmin/postfixadmin/master/INSTALL.TXT Step7. Configure RoundCubeRoundCube is a WebGUI IMAP client.Download Roundcube Webmail from https://github.com/roundcube/roundcubemail/releases 12345# wget https://github.com/roundcube/roundcubemail/releases/download/1.5.2/roundcubemail-1.5.2-complete.tar.gz# tar -zxvf roundcubemail-1.5.2-complete.tar.gz# mv roundcubemail-1.5.2 /usr/share/nginx/roundcube# chown nginx:nginx -R /usr/share/nginx/roundcube/# dnf install php-ldap php-imagick php-common php-gd php-imap php-json php-curl php-zip php-xml php-mbstring php-bz2 php-intl php-gmp -y Add your Private CA’s certificate in the end of the following file. Note: This needs to be saved forcibly with :wq!. 12345678# vim /etc/pki/tls/certs/ca-bundle.crt#Add the following to the end of the file.# My Private CA Certificate.-----BEGIN CERTIFICATE-----...Your CA certificate....-----END CERTIFICATE----- Now you need to open your browser and enter following URL to continue RoundCube setup.https://email.example.com/installer Fill Database setup.Fill IMAP setup.IMAP server: ssl://email.example.com port: 993SMTP server: tls://email.example.com port: 587SMTP server: ssl://email.example.com port: 465Next, you can scroll down to the Plugins section to enable some plugins. For example: the password plugin, mark as junk plugin and so on. I enabled all of them.Make sure the password plugin in the plugin list at the end of this file. The plugin order doesn’t matter. 1# grep &#x27;password&#x27; /usr/share/nginx/roundcube/config/config.inc.php Create the new PHP file by copying the file below and modify it like following. This will enable RoundCube to connect our MySQL database and update password. 12# cp /usr/share/nginx/roundcube/plugins/password/config.inc.php.dist /usr/share/nginx/roundcube/plugins/password/config.inc.phpvim /usr/share/nginx/roundcube/plugins/password/config.inc.php 123456789#Change the value to:$config[&#x27;password_db_dsn&#x27;] = &#x27;mysql://postfixadmin:YourPassword@127.0.0.1/postfixadmin&#x27;;$config[&#x27;password_query&#x27;] = &#x27;UPDATE mailbox SET password=%D,modified=NOW() WHERE username=%u&#x27;;$config[&#x27;password_strength_driver&#x27;] = &#x27;zxcvbn&#x27;;$config[&#x27;password_zxcvbn_min_score&#x27;] = 5;$config[&#x27;password_algorithm&#x27;] = &#x27;dovecot&#x27;;$config[&#x27;password_dovecotpw&#x27;] = &#x27;/usr/bin/doveadm pw -r 12&#x27;;$config[&#x27;password_dovecotpw_method&#x27;] = &#x27;SHA512&#x27;;$config[&#x27;password_dovecotpw_with_method&#x27;] = true; config.inc.php 123# chown nginx:nginx /usr/share/nginx/roundcube/plugins/password/config.inc.php# chmod 600 /usr/share/nginx/roundcube/plugins/password/config.inc.php# echo &quot;$config[&#x27;enable_installer&#x27;] = true;&quot; &gt;&gt; /usr/share/nginx/roundcube/config/config.inc.php Close the browser and enter following URL to complete set up.https://email.example.com/installer/index.php?_step=3Send testLogin testAfter completing the installation and the final tests please remove the whole installer folder from the document root of the webserver or make sure that enable_installer option in config.inc.php is disabled. 1234# rm -rf /usr/share/nginx/roundcube/installer/vim /usr/share/nginx/roundcube/config/config.inc.phpChange to:$config[&#x27;enable_installer&#x27;]=false; 12# nginx -t# nginx -s reload Close the browser and enter following URL to login your account.https://mail.example.com/postfixadmin/setup.phphttps://mail.example.com Reference:https://www.linuxbabe.com/redhat/postfixadmin-create-virtual-mailboxes-centos-mail-serverhttps://www.linuxbabe.com/redhat/install-roundcube-webmail-centos-8-rhel-8-apache-nginx#out-of-office TroubleShootingPerform a user lookup in Dovecot’s userdbs. 1# doveadm user &#x27;*&#x27; 12345# journalctl -eu dovecot# vim /var/log/maillog# mail user@gmail.com# vim /etc/aliases# newaliases","categories":[{"name":"Linux","slug":"Linux","permalink":"https://kenryu.cc/categories/Linux/"}],"tags":[{"name":"Server","slug":"Server","permalink":"https://kenryu.cc/tags/Server/"},{"name":"Nginx","slug":"Nginx","permalink":"https://kenryu.cc/tags/Nginx/"},{"name":"MySQL","slug":"MySQL","permalink":"https://kenryu.cc/tags/MySQL/"},{"name":"PHP","slug":"PHP","permalink":"https://kenryu.cc/tags/PHP/"}]},{"title":"Deploy Nginx, MySQL, PHP on Linux (LEMP/LNMP stack)","slug":"Linux/Deploy-Linux-Nginx-MySQL-PHP-Server","date":"2021-11-21T15:00:00.000Z","updated":"2022-05-28T01:02:45.932Z","comments":true,"path":"2021/11/22/Linux/Deploy-Linux-Nginx-MySQL-PHP-Server/","link":"","permalink":"https://kenryu.cc/2021/11/22/Linux/Deploy-Linux-Nginx-MySQL-PHP-Server/","excerpt":"","text":"Name Version Command Linux Rocky Linux release 8.5 (Green Obsidian) cat /etc/os-release /etc/redhat-release /etc/system-release Nginx nginx version: nginx/1.20.2 nginx -v MySQL mysql Ver 8.0.28 for Linux on x86_64 (MySQL Community Server - GPL) mysql –version PHP PHP 7.4.29 (cli) (built: Apr 12 2022 10:55:38) ( NTS ) php -v 0. PreparationCheck if old packages have been installed. 1# rpm -qa | grep -E &quot;nginx|php|mariadb&quot; If they are installed, remove them. 123# yum remove -y &quot;nginx*&quot;# yum remove -y &quot;php*&quot;# yum remove -y &quot;mariadb*&quot; 1. Add repositories1.1 Add Nginx Official repositoryCreate and edit the following file. 1# vim /etc/yum.repos.d/nginx.repo 12345678[nginx]name=nginx stable repobaseurl=http://nginx.org/packages/centos/$releasever/$basearchgpgcheck=1enable=1gpgkey=https://nginx.org/keys/nginx_signing.keymodule_hotfixes=trueenabled=1 12# yum-config-manager --enable nginx# dnf config-manager --enable nginx 1.2 Add MySQL Official repositoriesDownload and install repositories form : MySQL Community Downloads 123# dnf -y install https://repo.mysql.com//mysql80-community-release-el8-3.noarch.rpm# dnf config-manager --enable mysql80-community# yum repolist all | grep mysql 1.3 Add PHP repositoryExecute the following commands in sequence to add and update epel repository. 12# dnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm# dnf module enable php:remi-7.4 -y 2. Installation2.1 Install Nginx12# dnf -y install nginx# nginx -v 2.2 Install MySQL123# yum module disable mysql -y# yum install mysql-community-server -y# mysql -V 2.3 Install PHP12# dnf install php php-curl php-dom php-exif php-fileinfo php-fpm php-gd php-hash php-json php-mbstring php-mysqli php-openssl php-pcre php-xml libsodium php-ldap php-pdo php-pear php-snmp php-xml -y# php -v 3. Configuration3.1 Configure Nginx1# systemctl enable --now nginx 12# mv /etc/nginx/conf.d/default.conf /etc/nginx/conf.d/default.conf.bak# vim default.conf 12345678910111213location / &#123;root /usr/share/nginx/html;- index index.html index.htm;+ index index.html index.htm index.php;&#125;location ~ .php$ &#123;root /usr/share/nginx/html;fastcgi_pass unix:/run/php-fpm/www.sock;fastcgi_index index.php;fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;include fastcgi_params;&#125;## Edit this file according to actual usage. 3.2 Configure MySQLStart and set enabled the MySQL server 1# systemctl enable --now mysqld A superuser account ‘root‘@’localhost’ is created. A password for the superuser is set and stored in the error log file. To reveal it, use the following command: 1# grep &#x27;temporary password&#x27; /var/log/mysqld.log 12# mysql -uroot -pmysql&gt; ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;Your_Password&#x27;; MySQL’s validate_password plugin is installed by default. This will require that passwords contain at least one uppercase letter, one lowercase letter, one digit, and one special character, and that the total password length is at least 8 characters. Reference siteA Quick Guide to Using the MySQL Yum Repository 3.3 Configure PHP1# vim /etc/php-fpm.d/www.conf 1234- user = apache+ user = nginx- group = apache+ group = nginx 1234# grep timezone /etc/php.ini; Defines the default timezone used by the date functions; http://php.net/date.timezonedate.timezone = Asia/Tokyo 1# systemctl enable --now php-fpm (Optional) Verify environment configurationExecute the following command to create test file. The root directory of the site that has been configured in /usr/share/nginx/html, This article uses thatdirectory as an example. 123# echo &quot;&lt;?php phpinfo(); ?&gt;&quot; &gt;&gt; /usr/share/nginx/html/index.php# nginx -t# nginx -s reload Modify the firewall policy to make the server can be accessed. 12# firewall-cmd --permanent --add-port=&#123;443/tcp,80/tcp&#125;# firewall-cmd --reload Access the following address in your browser.http://your_lnmp_server_iphttp://your_lnmp_server_ip/index.php If the results are displayed as above, the environment is successfully configured.","categories":[{"name":"Linux","slug":"Linux","permalink":"https://kenryu.cc/categories/Linux/"}],"tags":[{"name":"Server","slug":"Server","permalink":"https://kenryu.cc/tags/Server/"},{"name":"Nginx","slug":"Nginx","permalink":"https://kenryu.cc/tags/Nginx/"},{"name":"MySQL","slug":"MySQL","permalink":"https://kenryu.cc/tags/MySQL/"},{"name":"PHP","slug":"PHP","permalink":"https://kenryu.cc/tags/PHP/"}]},{"title":"Binary Search","slug":"Sort-Algorithm/Binary-Search","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.159Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Binary-Search/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Binary-Search/","excerpt":"","text":"123456789101112131415161718#ifndef ALGORITHM_BINARY_SEARCH_METHOD_H#define ALGORITHM_BINARY_SEARCH_METHOD_H/* 二分探索 */int binary_search (int list[], int list_size, int x) &#123; int left, right, mid; left = 0; right = list_size - 1; while (left &lt;= right) &#123; mid = (left + right)/2; if (list[mid] == x) &#123; return mid; &#125; else if (list[mid] &lt; x) &#123; left = mid + 1; &#125; else &#123; right = mid - 1; &#125; &#125; return -1;&#125;#endif //ALGORITHM_BINARY_SEARCH_METHOD_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Bubble Sort","slug":"Sort-Algorithm/Bubble-Sort","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.160Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Bubble-Sort/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Bubble-Sort/","excerpt":"","text":"12345678910111213141516171819202122232425262728#ifndef ALGORITHM_BUBBLE_SORT_H#define ALGORITHM_BUBBLE_SORT_H/* バブルソート */void bubble_sort (int *array, int array_size) &#123; int i, j;// for (i = 0; i &lt; array_size - 1; i++)&#123;// for (j = array_size - 1; j &gt;= i + 1; j--)&#123; // 右から左に操作// if (array[j] &lt; array[j-1]) &#123;// swap(&amp;array[j], &amp;array[j-1]);// &#125;// &#125;// printf(&quot;step %2d: &quot;,i);// print_array(array,array_size);// &#125; for(i=0;i&lt;array_size-1;i++)&#123; for(j=0;j&lt;array_size-1-i;j++)&#123;//左から右に操作 if(array[j]&gt;array[j+1])&#123; swap(&amp;array[j],&amp;array[j+1]); &#125; &#125; printf(&quot;step %2d: &quot;,i+1); print_array(array,array_size); &#125;&#125;#endif //ALGORITHM_BUBBLE_SORT_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Function Head","slug":"Sort-Algorithm/Function-Head","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.159Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Function-Head/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Function-Head/","excerpt":"","text":"123456789101112131415161718192021#ifndef ALGORITHM_FUNCTION_H#define ALGORITHM_FUNCTION_H/* 値を交換する関数 */void swap (int *x, int *y) &#123; int temp; // 値を一時保存する変数 temp = *x; *x = *y; *y = temp;&#125;/*一次配列を出力する関数*/void print_array(int array[], int array_size)&#123; int i; for (i = 0; i &lt; array_size; i++) &#123; printf(&quot;%d &quot;, array[i]); &#125; printf(&quot;\\n&quot;);&#125;#endif //ALGORITHM_FUNCTION_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Global Head","slug":"Sort-Algorithm/Global-Head","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.160Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Global-Head/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Global-Head/","excerpt":"","text":"12345678910111213141516#ifndef ALGORITHM_GLOBAL_H#define ALGORITHM_GLOBAL_H#include&lt;stdio.h&gt;#include&quot;function.h&quot;#include&quot;selection_sort.h&quot;#include&quot;bubble_sort.h&quot;#include&quot;merge_sort.h&quot;#include&quot;insertion_sort.h&quot;#include&quot;shell_sort.h&quot;#include&quot;quick_sort.h&quot;#include&quot;heap_sort.h&quot;#include&quot;linear_search_method.h&quot;#include&quot;binary_search_method.h&quot;#include&quot;hash_table_search_method.h&quot;#endif //ALGORITHM_GLOBAL_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Heap Sort","slug":"Sort-Algorithm/Heap-Sort","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.159Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Heap-Sort/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Heap-Sort/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031#ifndef ALGORITHM_HEAP_SORT_H#define ALGORITHM_HEAP_SORT_H/* pushdown操作 */void pushdown (int array[], int first, int last) &#123; int parent = first; // 親 int child = 2*parent; // 左の子 while (child &lt;= last) &#123; if ((child &lt; last) &amp;&amp; (array[child] &lt; array[child+1])) &#123; child++; // 右の子の方が大きいとき、右の子を比較対象に設定 &#125; if (array[child] &lt;= array[parent]) &#123; break; &#125; // ヒープ済み swap(&amp;array[child], &amp;array[parent]); parent = child; child = 2* parent; &#125;&#125;/* ヒープソート */void heap_sort (int array[], int array_size) &#123; int i; for (i = array_size/2; i &gt;= 1; i--) &#123; pushdown(array, i, array_size); // 全体をヒープ化 &#125; for (i = array_size; i &gt;= 2; i--) &#123; swap(&amp;array[1], &amp;array[i]); // 最大のものを最後に pushdown(array, 1, i-1); // ヒープ再構築 &#125;&#125;#endif //ALGORITHM_HEAP_SORT_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Insertion Sort","slug":"Sort-Algorithm/Insertion-Sort","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.160Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Insertion-Sort/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Insertion-Sort/","excerpt":"","text":"1234567891011121314151617181920212223242526272829303132333435#ifndef ALGORITHM_INSERTION_SORT_H#define ALGORITHM_INSERTION_SORT_H/* 挿入ソート */void insertion_sort (int array[], int array_size) &#123; int i, j; for (i = 1; i &lt; array_size; i++) &#123; // 先頭から順にソート j = i; while ((j &gt; 0) &amp;&amp; (array[j-1] &gt; array[j])) &#123; //整列済みの場合は処理しない swap(&amp;array[j-1], &amp;array[j]); // 整列されていない要素を交換 j--; &#125; printf(&quot;step %2d: &quot;,i); print_array(array,array_size); &#125;&#125;//void insertion_sort (int array[], int array_size) &#123;// int i, j, k,l;// for(j=1;j&lt;array_size;j++)&#123;// for(i=0;i&lt;j;i++)&#123;// if(array[j]&lt;array[i])&#123;// k=array[j];// for(l=j;l&gt;i;l--)&#123;// array[l]=array[l-1];// &#125;// array[i]=k;// &#125;// &#125;// printf(&quot;step %2d: &quot;,j);// print_array(array,array_size);// &#125;//&#125;#endif //ALGORITHM_INSERTION_SORT_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Main.c","slug":"Sort-Algorithm/Main.c","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.160Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Main.c/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Main.c/","excerpt":"","text":"123456789101112131415161718192021222324252627282930313233343536#include&quot;global.h&quot;int main (void) &#123; int array[10] = &#123; 2, 1, 8, 5, 4, 7, 9, 0, 6, 3 &#125;; int array_size=sizeof(array) / sizeof(int); printf(&quot;step %2d: &quot;,0); print_array(array,array_size);// selection_sort(array, array_size);// bubble_sort(array, array_size);// merge_sort(array, 0, 9);// insertion_sort(array, array_size); shell_sort(array, array_size);// quick_sort(array, 0, 9);// heap_sort(array, 9); print_array(array,10); return 0;// int list[10] = &#123;0, 4, 9, 10, 13, 17, 25, 36, 37, 40&#125;;// int x;// int answer;//// printf(&quot;x?&gt; &quot;);// scanf(&quot;%d&quot;, &amp;x);//// answer = liner_search(list, 10, x);// answer = sorted_liner_search(list, 10, x);// answer = binary_search(list, 10, x);//// if (answer != -1) &#123;// printf(&quot;%d\\n&quot;, answer);// &#125;else&#123;// printf(&quot;not exist\\n&quot;);// &#125;&#125;","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Merge Sort","slug":"Sort-Algorithm/Merge-Sort","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.160Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Merge-Sort/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Merge-Sort/","excerpt":"","text":"1234567891011121314151617181920212223242526272829303132333435363738394041#ifndef ALGORITHM_MERGE_SORT_H#define ALGORITHM_MERGE_SORT_H/* マージソート */void merge_sort (int array[], int left, int right) &#123; int i, j, k, mid,l; int work[10]; // 作業用配列 if (left &lt; right) &#123; mid = (left + right)/2; // 真ん中のIndex merge_sort(array, left, mid); // 再帰関数による左を整列 merge_sort(array, mid+1, right); // 再帰関数による右を整列 for (i = mid; i &gt;= left; i--) &#123;// 左半分 work[i] = array[i]; &#125; for (j = mid+1; j &lt;= right; j++) &#123; work[right-(j-(mid+1))] = array[j]; // 右半分を逆順 &#125; i = left; j = right; for (k = left; k &lt;= right; k++) &#123; if (work[i] &lt; work[j]) &#123; array[k] = work[i++]; &#125;else&#123; array[k] = work[j--]; &#125; &#125; for (l = 0; l &lt;= right; l++) &#123; printf(&quot;%d &quot;, work[l]); if(l==mid)&#123; printf(&quot;| &quot;); &#125; &#125; printf(&quot;\\n&quot;); &#125;// printf(&quot;step %2d: &quot;,k);// print_array(array,10);&#125;#endif //ALGORITHM_MERGE_SORT_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Quick Sort","slug":"Sort-Algorithm/Quick-Sort","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.160Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Quick-Sort/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Quick-Sort/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031323334353637383940#ifndef ALGORITHM_QUICK_SORT_H#define ALGORITHM_QUICK_SORT_H/**** pivotを決め、* 全データをpivotを境目に振り分け、* pivotの添え字を返す***/int partition (int array[], int left, int right) &#123; int i, j, pivot; i = left; j = right + 1; pivot = left; // 先頭要素をpivotとする do &#123; do &#123; i++; &#125; while (array[i] &lt; array[pivot]); do &#123; j--; &#125; while (array[pivot] &lt; array[j]); // pivotより小さいものを左へ、大きいものを右へ if (i &lt; j) &#123; swap(&amp;array[i], &amp;array[j]); &#125; &#125; while (i &lt; j); swap(&amp;array[pivot], &amp;array[j]); //pivotを更新 return j;&#125;/* クイックソート */void quick_sort (int array[], int left, int right) &#123; int pivot; if (left &lt; right) &#123; pivot = partition(array, left, right); quick_sort(array, left, pivot-1); // pivotを境に再帰的にクイックソート quick_sort(array, pivot+1, right); &#125; print_array(array,10);&#125;#endif //ALGORITHM_QUICK_SORT_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Shell Sort","slug":"Sort-Algorithm/Shell-Sort","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.160Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Shell-Sort/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Shell-Sort/","excerpt":"","text":"123456789101112131415161718192021#ifndef ALGORITHM_SHELL_SORT_H#define ALGORITHM_SHELL_SORT_H/* シェルソート */void shell_sort (int array[], int array_size) &#123; int i, j, h; for (h = 1; h &lt;= array_size/9; h = 3*h + 1); // 間隔hを決める for ( ; h &gt; 0; h /= 3) &#123; // hを狭めていく /* 以下、挿入ソートとほぼ同じ */ for (i = h; i &lt; array_size; i++) &#123; j = i; while ((j &gt; h - 1) &amp;&amp; (array[j-h] &gt; array[j])) &#123; swap(&amp;array[j-h], &amp;array[j]); j -= h; &#125; &#125;// printf(&quot;step %2d: &quot;,h);// print_array(array,array_size); &#125;&#125;#endif //ALGORITHM_SHELL_SORT_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]},{"title":"Selection Sort","slug":"Sort-Algorithm/Selection-Sort","date":"2020-09-29T15:00:00.000Z","updated":"2022-05-24T12:44:51.159Z","comments":true,"path":"2020/09/30/Sort-Algorithm/Selection-Sort/","link":"","permalink":"https://kenryu.cc/2020/09/30/Sort-Algorithm/Selection-Sort/","excerpt":"","text":"123456789101112131415161718192021222324252627#ifndef ALGORITHM_SELECTION_SORT_H#define ALGORITHM_SELECTION_SORT_H/* 選択ソート * 最小値（または最大値）を見つけて、先頭に移動。2番目に小さい（または大きい）要素を見つけて、2番目に移動。 * これを 要素数-1番目 まで繰り返して、整列するアルゴリズム。 * 分かりやすいが、遅い。安定ではない。 * 比較回数=(n-1)+(n-2)+...+2+1=n(n-1)/2=O(n^2) * swap回数=n-1 */void selection_sort (int array[], int array_size) &#123; int i, j, min_index; for (i = 0; i &lt; array_size-1; i++) &#123; min_index = i; // 先頭要素が一番小さいとする for (j = i + 1; j &lt; array_size; j++) &#123; if (array[j] &lt; array[min_index]) &#123; min_index = j; &#125; // 値の比較、最小値の更新 &#125; swap(&amp;array[min_index], &amp;array[i]); // 最小値と先頭要素を交換 printf(&quot;step %2d: &quot;,i+1); print_array(array,array_size); &#125;&#125;#endif //ALGORITHM_SELECTION_SORT_H","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]}],"categories":[{"name":"Linux","slug":"Linux","permalink":"https://kenryu.cc/categories/Linux/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/categories/Algorithm/"}],"tags":[{"name":"Server","slug":"Server","permalink":"https://kenryu.cc/tags/Server/"},{"name":"Nginx","slug":"Nginx","permalink":"https://kenryu.cc/tags/Nginx/"},{"name":"MySQL","slug":"MySQL","permalink":"https://kenryu.cc/tags/MySQL/"},{"name":"PHP","slug":"PHP","permalink":"https://kenryu.cc/tags/PHP/"},{"name":"C","slug":"C","permalink":"https://kenryu.cc/tags/C/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://kenryu.cc/tags/Algorithm/"},{"name":"FE","slug":"FE","permalink":"https://kenryu.cc/tags/FE/"}]}